---
# Playbook for Web Server

- name: Install httpd and php
  yum: name={{ item }} state=present
  with_items:
   - httpd
   - php
   - php-mysql

- name: Install web role specific dependencies
  yum: name={{ item }} state=installed
  with_items:
   - git

- name: Start & Enable Apache Server to start on boot
  service: name=httpd state=started enabled=yes

#- name: Enable the firewall port for Apache
 # firewalld: port=80/tcp permanent=true state=enabled immediate=yes
 
 - name: download mediawiki from sources 
   get_url: url=https://releases.wikimedia.org/mediawiki/1.35/mediawiki-1.35.0.tar.gz dest=/var/www/html/mediawiki-1.35.0.tar.gz

 - name: Extract mediawiki-1.35.0.tar.gz into /var/www/html
   unarchive:
     src: /var/www/html/mediawiki-1.35.0.tar.gz
     dest: /var/www/html 
 
- include: copy_code.yml
